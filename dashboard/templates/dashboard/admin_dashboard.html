<div class="space-y-10">

  <!-- ================= KPI CARDS ================= -->
  <section>
    <h2 class="text-xl font-bold mb-4">Visão Administrativa</h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">

      <div class="p-6 bg-white dark:bg-gray-800 rounded-xl shadow border dark:border-gray-700">
        <p class="text-sm text-gray-500">Usuários</p>
        <h3 class="text-4xl font-bold text-emerald-500">{{ users_count }}</h3>
      </div>

      <div class="p-6 bg-white dark:bg-gray-800 rounded-xl shadow border dark:border-gray-700">
        <p class="text-sm text-gray-500">Professores</p>
        <h3 class="text-4xl font-bold text-emerald-500">{{ teachers_count }}</h3>
      </div>

      <div class="p-6 bg-white dark:bg-gray-800 rounded-xl shadow border dark:border-gray-700">
        <p class="text-sm text-gray-500">Redações</p>
        <h3 class="text-4xl font-bold text-emerald-500">{{ essays_count }}</h3>
      </div>

      <div class="p-6 bg-white dark:bg-gray-800 rounded-xl shadow border dark:border-gray-700">
        <p class="text-sm text-gray-500">Pendentes</p>
        <h3 class="text-4xl font-bold text-red-500">{{ pending_count }}</h3>
      </div>

    </div>
  </section>


  <!-- ================= GRÁFICO ADMIN ================= -->
  <section>
    <div class="bg-white dark:bg-gray-800 p-6 rounded-xl shadow border border-gray-200 dark:border-gray-700">
      <h2 class="text-xl font-bold mb-4">Envios por dia (últimos 7 dias)</h2>
      <canvas id="adminChart"></canvas>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
      const adminLabels = {{ labels|safe }};
      const adminValues = {{ values|safe }};

      new Chart(document.getElementById('adminChart'), {
        type: 'bar',
        data: {
          labels: adminLabels,
          datasets: [{
            label: 'Envios por dia',
            data: adminValues,
            backgroundColor: '#10b981',
            borderColor: '#065f46',
            borderWidth: 2,
            hoverBackgroundColor: '#059669',
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: false },
            tooltip: { enabled: true }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: { color: '#6b7280' },
              grid: { color: 'rgba(0,0,0,0.1)' }
            },
            x: {
              ticks: { color: '#6b7280' },
              grid: { display: false }
            }
          }
        }
      });
    </script>
  </section>


  <!-- ================= LISTA DE REDAÇÕES ================= -->
  <section class="pb-10">
    <h2 class="text-xl font-bold mb-4">Últimas Redações</h2>
    {% include "dashboard/components/table_essays.html" %}
  </section>

</div>
