{% extends "dashboard/base.html" %}
{% block title %}Pendências — ENEM Corrections{% endblock %}
{% block header %}Redações Pendentes{% endblock %}

{% block content %}

<!-- ===== FILTROS ===== -->
<div class="flex flex-col md:flex-row gap-4 justify-between items-center mb-8">

  <div class="flex gap-3">
    <select class="px-3 py-2 rounded-lg bg-white dark:bg-gray-800 border dark:border-gray-700">
      <option>Status: Todos</option>
      <option>Pendentes</option>
      <option>Corrigidas</option>
    </select>

    <select class="px-3 py-2 rounded-lg bg-white dark:bg-gray-800 border dark:border-gray-700">
      <option>Ordenar por: Recente</option>
      <option>Mais antigos</option>
      <option>Nota maior</option>
      <option>Nota menor</option>
    </select>
  </div>

  <input type="text" placeholder="Buscar aluno..."
    class="px-3 py-2 rounded-lg bg-white dark:bg-gray-800 border dark:border-gray-700 w-full md:w-64" />

</div>

<!-- ===== TABELA ===== -->
<div class="bg-white dark:bg-gray-800 rounded-xl shadow border border-gray-200 dark:border-gray-700 overflow-hidden">

  <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
    <thead class="bg-gray-50 dark:bg-gray-700/50">
      <tr>
        <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase">Aluno</th>
        <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase">Tema</th>
        <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase">Status</th>
        <th class="px-6 py-3 text-left text-xs font-semibold text-gray-600 dark:text-gray-300 uppercase">Enviado</th>
        <th class="px-6 py-3"></th>
      </tr>
    </thead>

    <tbody class="divide-y divide-gray-200 dark:divide-gray-700 bg-white dark:bg-gray-800">
      {% for essay in essays %}
      <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/40 transition">

        <td class="px-6 py-4">
          <div class="font-medium text-gray-800 dark:text-gray-100">{{ essay.student.username }}</div>
          <div class="text-xs text-gray-500 dark:text-gray-400">{{ essay.student.email }}</div>
        </td>

        <td class="px-6 py-4 text-sm text-gray-700 dark:text-gray-200">
          {{ essay.topic }}
        </td>

        <td class="px-6 py-4">
          {% if essay.status == "pending" %}
          <span class="px-2 py-1 rounded text-xs bg-yellow-200 dark:bg-yellow-600 text-yellow-900 dark:text-yellow-100">
            Pendente
          </span>
          {% else %}
          <span
            class="px-2 py-1 rounded text-xs bg-emerald-200 dark:bg-emerald-600 text-emerald-900 dark:text-emerald-100">
            Corrigida
          </span>
          {% endif %}
        </td>

        <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400">
          {{ essay.created_at|date:"d/m/Y H:i" }}
        </td>

        <td class="px-6 py-4 text-right">
          <a href="/essays/corrigir/{{ essay.id }}/"
            class="px-4 py-2 text-sm bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition">
            Ver
          </a>
        </td>

      </tr>
      {% endfor %}
    </tbody>
  </table>

</div>

{% endblock %}