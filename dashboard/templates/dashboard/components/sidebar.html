<!-- SIDEBAR PRO V2 -->
<aside
  class="fixed inset-y-0 left-0 z-40 w-72 transform
         bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700
         transition-transform duration-300 ease-in-out
         lg:static lg:translate-x-0"
  :class="{ '-translate-x-full': !sidebarOpen }">

  <!-- LOGO -->
  <div class="px-6 py-5 flex items-center justify-between border-b dark:border-gray-700">
    <div>
      <h1 class="text-xl font-bold text-emerald-600 dark:text-emerald-300">ENEM Corrections</h1>
      <p class="text-xs text-gray-500 dark:text-gray-400">Painel Inteligente</p>
    </div>

    <button @click="sidebarOpen = false" class="lg:hidden text-gray-400 dark:text-gray-300 text-xl">
      âœ•
    </button>
  </div>

  <!-- NAVIGATION -->
  <nav class="px-4 py-6 space-y-6 overflow-y-auto">

    <!-- ============ GRUPO: Dashboard ============ -->
    <div>
      <h3 class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400 px-2 mb-2">
        Dashboard
      </h3>

      <ul class="space-y-1">

        <!-- VISÃƒO GERAL -->
        <li>
          <a href="/dashboard/"
             class="nav-link {% if request.path == '/dashboard/' %}nav-active{% endif %}">
            ğŸ“Š <span>VisÃ£o Geral</span>
          </a>
        </li>

        {% if request.user.role == "student" %}
        <li>
          <a href="/dashboard/student/"
             class="nav-link {% if '/dashboard/student' in request.path %}nav-active{% endif %}">
            ğŸ“ <span>Meu Desempenho</span>
          </a>
        </li>
        {% endif %}

        {% if request.user.role == "teacher" %}
        <li>
          <a href="/dashboard/teacher/"
             class="nav-link {% if '/dashboard/teacher' in request.path %}nav-active{% endif %}">
            ğŸ§‘â€ğŸ« <span>CorreÃ§Ãµes</span>
          </a>
        </li>

        <li>
          <a href="/essays/pendentes/"
             class="nav-link {% if '/essays/pendentes' in request.path %}nav-active{% endif %}">
            ğŸ“ <span>PendÃªncias</span>
          </a>
        </li>
        {% endif %}

        {% if request.user.role == "admin" %}
        <li>
          <a href="/dashboard/admin/"
             class="nav-link {% if '/dashboard/admin' in request.path %}nav-active{% endif %}">
            âš™ï¸ <span>AdministraÃ§Ã£o</span>
          </a>
        </li>
        {% endif %}
      </ul>
    </div>

    <!-- ============ GRUPO: RedaÃ§Ãµes ============ -->
    {% if request.user.role != "admin" %}
    <div>
      <h3 class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400 px-2 mb-2">
        RedaÃ§Ãµes
      </h3>

      <ul class="space-y-1">

        {% if request.user.role == "student" %}
        <li>
          <a href="/essays/enviar/"
             class="nav-link {% if '/essays/enviar' in request.path %}nav-active{% endif %}">
            âœï¸ <span>Enviar RedaÃ§Ã£o</span>
          </a>
        </li>
        {% endif %}

        {% if request.user.role == "teacher" %}
        <li>
          <a href="/essays/corrigir/"
             class="nav-link {% if '/essays/corrigir' in request.path %}nav-active{% endif %}">
            ğŸ“‘ <span>Corrigir RedaÃ§Ãµes</span>
          </a>
        </li>
        {% endif %}
      </ul>
    </div>
    {% endif %}

    <!-- ============ GRUPO: Admin AvanÃ§ado ============ -->
    {% if request.user.role == "admin" %}
    <div x-data="{ open: false }">

      <button @click="open = !open"
              class="nav-dropdown">
        <span class="flex items-center gap-3">
          ğŸ›¡ï¸ <span>Gerenciamento</span>
        </span>
        <span x-text="open ? 'â–¾' : 'â–¸'"></span>
      </button>

      <ul class="mt-2 pl-4 space-y-1" x-show="open" x-transition>
        <li><a href="/admin/auth/user/" class="nav-link">ğŸ‘¤ UsuÃ¡rios</a></li>
        <li><a href="/admin/app/essay/" class="nav-link">ğŸ“ RedaÃ§Ãµes</a></li>
        <li><a href="/admin/app/teacher/" class="nav-link">ğŸ§‘â€ğŸ« Professores</a></li>
      </ul>
    </div>
    {% endif %}

    <!-- ============ GRUPO: Conta ============ -->
    <div>
      <h3 class="text-xs font-semibold uppercase tracking-wide text-gray-500 dark:text-gray-400 px-2 mb-2">
        Conta
      </h3>

      <ul>
        <li>
          <a href="/auth/logout/"
             class="nav-link text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-600/20">
            ğŸšª <span>Sair</span>
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- FOOTER COM AVATAR -->
  <footer class="absolute bottom-0 w-full p-4 border-t dark:border-gray-700">
    <div class="flex items-center gap-3">
      <div class="w-10 h-10 bg-emerald-600 text-white rounded-full flex items-center justify-center">
        {{ request.user.username|first|upper }}
      </div>
      <div>
        <p class="font-medium">{{ request.user.username }}</p>
        <p class="text-xs text-gray-500 dark:text-gray-400">{{ request.user.role }}</p>
      </div>
    </div>
  </footer>

</aside>

<!-- Styles globais utilitÃ¡rios -->
<style>
  .nav-link {
    @apply flex items-center gap-3 px-3 py-2 rounded-lg transition
           text-gray-700 dark:text-gray-200
           hover:bg-emerald-100 dark:hover:bg-gray-700;
  }
  .nav-active {
    @apply bg-emerald-50 dark:bg-gray-800 font-semibold text-emerald-700 dark:text-emerald-300;
  }
  .nav-dropdown {
    @apply flex items-center justify-between w-full px-3 py-2 rounded-lg
           bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700
           transition text-gray-700 dark:text-gray-200 font-medium;
  }
</style>
